# 哨兵模式

**用途**

主节点故障时切换新主节点保证服务稳定性

---

**监控**

- 心跳机制
  - `PING/PONG`
- 主观下线
  - 目标节点未能在规定时间内响应 `PING` 命令
- 客观下线
  - 仅对于主节点
  - 多个哨兵报告主节点处于下线状态

**选举**

1. 判定主节点客观下线的哨兵成为Leader候选者
2. 候选者发起投票
3. 每位哨兵仅有一票，候选者可以投给自己
4. 半数以上或配置的赞成票
5. `Leader` 牵头执行主从切换

**通知**

通知其他 节点